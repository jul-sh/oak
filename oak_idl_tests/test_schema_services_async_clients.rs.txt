// File automatically generated by `oak_idl_gen_services`, do not edit.
// Original service name: TestService

#[derive(Clone)]
pub struct TestServiceAsyncClient<T: oak_idl::AsyncHandler> {
    handler: T
}

impl <T: oak_idl::AsyncHandler>TestServiceAsyncClient<T> {
    pub fn new(handler: T) -> Self {
        Self {
            handler
        }
    }
    pub async fn lookup_data(&mut self, request_body: Vec<u8>) -> Result<oak_idl::utils::OwnedFlatbuffer<LookupDataResponse<'_>>, oak_idl::Status> {
        flatbuffers::root::<LookupDataRequest>(&request_body).map_err(|err| oak_idl::Status::new_with_message(oak_idl::StatusCode::Internal, format!("Client failed to deserialize the request: {:?}", err)))?;
        let request = oak_idl::Request {
            method_id: 222,
            body: request_body,
        };
        let response_body = self.handler.invoke(request).await?;
        oak_idl::utils::OwnedFlatbuffer::from_vec(response_body).map_err(|err| oak_idl::Status::new_with_message(oak_idl::StatusCode::Internal, format!("Client failed to deserialize the response: {:?}", err)))
    }
    pub async fn log(&mut self, request_body: Vec<u8>) -> Result<oak_idl::utils::OwnedFlatbuffer<LogResponse<'_>>, oak_idl::Status> {
        flatbuffers::root::<LogRequest>(&request_body).map_err(|err| oak_idl::Status::new_with_message(oak_idl::StatusCode::Internal, format!("Client failed to deserialize the request: {:?}", err)))?;
        let request = oak_idl::Request {
            method_id: 223,
            body: request_body,
        };
        let response_body = self.handler.invoke(request).await?;
        oak_idl::utils::OwnedFlatbuffer::from_vec(response_body).map_err(|err| oak_idl::Status::new_with_message(oak_idl::StatusCode::Internal, format!("Client failed to deserialize the response: {:?}", err)))
    }
}
